version: 1

# TODO: location for time triggers

providers:
  gosund:
    username: ${env:USERNAME}
    password: ${env:PASSWORD}
    access_id: ${env:ACCESS_ID}
    access_key: ${env:ACCESS_KEY}

devices:
  switch-A:
    description: air purifier
    provider: gosund
    type: switch
    id: '3460050570039f61e488'
  bulb-A:
    description: party light
    provider: gosund
    type: light-bulb
    id: 'eb46f5bc889a96fe4ecray'
  bulb-B:
    description: floor lamp 1
    provider: gosund
    type: light-bulb
    id: '123abc'
  bulb-C:
    description: floor lamp 2
    provider: gosund
    type: light-bulb
    id: 'abc123'

automations:
  - air-purifier:
      enabled: true
      components:
        - if:
            - AQI: >100
          then:
            - turn-on: switch-A
          else:
            - turn-off: switch-A

  - party-light:
      enabled: true
      components:
        - if:
            - weekday: friday,saturday
            - time: 3:00pm
          then:
            - turn-on: bulb-A
        - if:
            - weekday: friday,saturday
            - time: 8:00pm
          then:
            - turn-off: bulb-A

  - floor-lamp:
      enabled: false
      components:
        - if:
            - time: 5:00pm
          then:
            - turn-on: bulb-B
            - turn-on: bulb-C
        - if:
            - sunset: -2hrs
          then:
            - turn-on: bulb-B
        - if:
            - weekday: sunday,monday,tuesday,wednesday,thursday
            - time: 9:00pm
          then:
            - turn-off: bulb-B
            - turn-off: bulb-C
        - if:
            - weekday: friday,saturday
            - time: 10:00pm
          then:
            - turn-off: bulb-B
            - turn-off: bulb-C
